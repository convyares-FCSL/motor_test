<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Servo Bridge</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <main class="panel">
    <h1>Servo Action Control</h1>
    <p class="subtitle">Manual and saved single-axis control, plus 9 dual presets</p>

    <section class="row names">
      <div class="name-card">
        <label id="label1" for="name1">Motor 1 (ID 1)</label>
        <input id="name1" class="name-input" type="text" value="Motor 1" />
      </div>
      <div class="name-card">
        <label id="label2" for="name2">Motor 2 (ID 2)</label>
        <input id="name2" class="name-input" type="text" value="Motor 2" />
      </div>
    </section>

    <section class="row names-save">
      <button id="saveNames" class="save-names">Save Names</button>
    </section>

    <section class="row control">
      <span>Axis</span>
      <div class="axis-radios">
        <label class="radio-chip">
          <input type="radio" name="axis" value="1" checked />
          <span>ID 1</span>
        </label>
        <label class="radio-chip">
          <input type="radio" name="axis" value="2" />
          <span>ID 2</span>
        </label>
      </div>

      <span>Mode</span>
      <button id="modeToggle" class="mode-toggle" data-mode="manual">Mode: Manual</button>
    </section>

    <section class="row global-actions">
      <button id="stopAllBtn" class="stop-all-btn">STOP ALL</button>
    </section>

    <section class="row tuning">
      <label for="speed">Speed (%)</label>
      <input id="speed" type="range" min="0" max="100" step="1" value="25" />
      <output id="speedv">25% (768)</output>
      <label for="acc">Acc (%)</label>
      <input id="acc" type="range" min="0" max="100" step="1" value="20" />
      <output id="accv">20% (30)</output>
      <p id="profileInfo" class="hint-inline"></p>
    </section>

    <section class="row manual-setup" id="manualSetup">
      <button id="releaseBtn" class="setup-btn">Release</button>
      <button id="setMiddleBtn" class="setup-btn">Set Middle</button>
      <button id="middleBtn" class="setup-btn">Middle</button>
      <button id="stopBtn" class="setup-btn">Stop</button>
      <button id="torqueOnBtn" class="setup-btn">Torque On</button>
      <button id="recoverBtn" class="setup-btn">Recover</button>
    </section>

    <section class="row manual-jog" id="manualJog">
      <label for="jogStep">Jog Step (%)</label>
      <input id="jogStep" type="number" min="0.1" max="20" step="0.1" value="1.0" />
      <button id="jogMinusBtn" class="setup-btn">Jog -</button>
      <button id="jogPlusBtn" class="setup-btn">Jog +</button>
    </section>

    <section class="row manual-limits" id="manualLimits">
      <label for="manualMin">Min (%)</label>
      <input id="manualMin" type="number" min="0" max="100" step="0.1" value="0" />
      <label for="manualMax">Max (%)</label>
      <input id="manualMax" type="number" min="0" max="100" step="0.1" value="100" />
      <button id="saveManualLimitsBtn">Save Manual Limits</button>
    </section>

    <section class="row target" id="singleTarget">
      <label for="target">Target (%)</label>
      <input id="target" type="range" min="0" max="100" step="0.1" value="50" />
      <output id="targetv">50.0</output>
      <button id="saveSlot">Save To Slot</button>
    </section>

    <section class="row dual-target" id="dualTarget" hidden>
      <label for="dualName">Dual Name</label>
      <input id="dualName" class="name-input" type="text" placeholder="Preset name" />
      <label for="dualP1">ID1 (%)</label>
      <input id="dualP1" type="number" min="0" max="100" step="0.1" value="50" />
      <label for="dualP2">ID2 (%)</label>
      <input id="dualP2" type="number" min="0" max="100" step="0.1" value="50" />
      <button id="saveDual">Save Dual Preset</button>
    </section>

    <section class="slots" id="singleSlots">
      <h2>Saved Positions (1-9)</h2>
      <div id="slotsGrid" class="slots-grid">
        <button class="slot-btn" data-slot="1">S1</button>
        <button class="slot-btn" data-slot="2">S2</button>
        <button class="slot-btn" data-slot="3">S3</button>
        <button class="slot-btn" data-slot="4">S4</button>
        <button class="slot-btn" data-slot="5">S5</button>
        <button class="slot-btn" data-slot="6">S6</button>
        <button class="slot-btn" data-slot="7">S7</button>
        <button class="slot-btn" data-slot="8">S8</button>
        <button class="slot-btn" data-slot="9">S9</button>
      </div>
      <p id="slotInfo" class="hint">Selected slot: 1</p>
    </section>

    <section class="dual" id="dualSection" hidden>
      <h2>Dual Presets (ID1 + ID2)</h2>
      <div id="dualGrid" class="dual-grid">
        <button class="dual-btn" data-dual-slot="1">D1</button>
        <button class="dual-btn" data-dual-slot="2">D2</button>
        <button class="dual-btn" data-dual-slot="3">D3</button>
        <button class="dual-btn" data-dual-slot="4">D4</button>
        <button class="dual-btn" data-dual-slot="5">D5</button>
        <button class="dual-btn" data-dual-slot="6">D6</button>
        <button class="dual-btn" data-dual-slot="7">D7</button>
        <button class="dual-btn" data-dual-slot="8">D8</button>
        <button class="dual-btn" data-dual-slot="9">D9</button>
      </div>
      <p id="dualInfo" class="hint">Selected dual preset: 1</p>
    </section>

    <section class="row states">
      <div id="state1" class="state-box">ID1: no state yet</div>
      <div id="state2" class="state-box">ID2: no state yet</div>
    </section>

    <pre id="log"></pre>
  </main>
  <script src="/app.js"></script>
</body>
</html>
